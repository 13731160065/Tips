é¦–å…ˆäº†è§£ä¸€ä¸‹CGContextRef:

An opaque type that represents a Quartz 2D drawing environment.

Graphics Contextæ˜¯å›¾å½¢ä¸Šä¸‹æ–‡,å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€å—ç”»å¸ƒ,æˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œç»˜ç”»æ“ä½œ,ç»˜åˆ¶å®Œæˆå,å°†ç”»å¸ƒæ”¾åˆ°æˆ‘ä»¬çš„viewä¸­æ˜¾ç¤ºå³å¯,viewçœ‹ä½œæ˜¯ä¸€ä¸ªç”»æ¡†.

è‡ªå·±å­¦ä¹ æ—¶å®ç°çš„demoï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå…·ä½“çš„å®ç°çœ‹ä»£ç ï¼Œå¹¶æœ‰å®Œç¾çš„æ³¨é‡Šè§£é‡Šï¼Œè¿˜æœ‰ä¸€äº›å¯¹æˆ‘å¸®åŠ©çš„åšæ–‡ä¾›å¤§å®¶å‚è€ƒã€‚éƒ½åœ¨ä»£ç é‡Œé¢ã€‚

æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š
1.ç”»åœ†		ã€‡
2.ç”»çº¿		â€”â€”â€”â€”
3.ç”»çŸ©å½¢		â–
4.ç”»æ‰‡å½¢å’Œæ¤­åœ†	O
5.ç”»ä¸‰è§’å½¢	â–¶ï¸
6.ç”»åœ†è§’		åœ†è§’çŸ©å½¢
7.ç”»è´å¡å°”æ›²çº¿	ä¹±ä¸ƒå…«ç³Ÿçš„æ›²çº¿
8.ç”»å›¾ç‰‡		ğŸ˜Š

è‡ªå®šä¹‰CustomViewç±»,CustomView.h:
==============================================================================
    #import <UIKit/UIKit.h>  
    #import <QuartzCore/QuartzCore.h>  
    #define PI 3.14159265358979323846  
    @interface CustomView : UIView  
      
      
    @end  
==============================================================================

å®ç°ç±»CustomView.mï¼š 
==============================================================================
    #import "CustomView.h"  
      
    @implementation CustomView  
      
    - (id)initWithFrame:(CGRect)frame  
    {  
        self = [super initWithFrame:frame];  
        if (self) {  
        }  
        return self;  
    }  
      
      
    // è¦†ç›–drawRectæ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨æ­¤è‡ªå®šä¹‰ç»˜ç”»å’ŒåŠ¨ç”»  
    - (void)drawRect:(CGRect)rect  
    {  
        //An opaque type that represents a Quartz 2D drawing environment.  
        //ä¸€ä¸ªä¸é€æ˜ç±»å‹çš„Quartz 2Dç»˜ç”»ç¯å¢ƒ,ç›¸å½“äºä¸€ä¸ªç”»å¸ƒ,ä½ å¯ä»¥åœ¨ä¸Šé¢ä»»æ„ç»˜ç”»  
        CGContextRef context = UIGraphicsGetCurrentContext();  
          
        /*å†™æ–‡å­—*/  
        CGContextSetRGBFillColor (context,  1, 0, 0, 1.0);//è®¾ç½®å¡«å……é¢œè‰²  
        UIFont  *font = [UIFont boldSystemFontOfSize:15.0];//è®¾ç½®  
        [@"ç”»åœ†ï¼š" drawInRect:CGRectMake(10, 20, 80, 20) withFont:font];  
        [@"ç”»çº¿åŠå­¤çº¿ï¼š" drawInRect:CGRectMake(10, 80, 100, 20) withFont:font];  
        [@"ç”»çŸ©å½¢ï¼š" drawInRect:CGRectMake(10, 120, 80, 20) withFont:font];  
        [@"ç”»æ‰‡å½¢å’Œæ¤­åœ†ï¼š" drawInRect:CGRectMake(10, 160, 110, 20) withFont:font];  
        [@"ç”»ä¸‰è§’å½¢ï¼š" drawInRect:CGRectMake(10, 220, 80, 20) withFont:font];  
        [@"ç”»åœ†è§’çŸ©å½¢ï¼š" drawInRect:CGRectMake(10, 260, 100, 20) withFont:font];  
        [@"ç”»è´å¡å°”æ›²çº¿ï¼š" drawInRect:CGRectMake(10, 300, 100, 20) withFont:font];  
        [@"å›¾ç‰‡ï¼š" drawInRect:CGRectMake(10, 340, 80, 20) withFont:font];  
      
        /*ç”»åœ†*/  
        //è¾¹æ¡†åœ†  
        CGContextSetRGBStrokeColor(context,1,1,1,1.0);//ç”»ç¬”çº¿çš„é¢œè‰²  
        CGContextSetLineWidth(context, 1.0);//çº¿çš„å®½åº¦  
        //void CGContextAddArc(CGContextRef c,CGFloat x, CGFloat y,CGFloat radius,CGFloat startAngle,CGFloat endAngle, int clockwise)1å¼§åº¦ï¼180Â°/Ï€ ï¼ˆâ‰ˆ57.3Â°ï¼‰ åº¦ï¼å¼§åº¦Ã—180Â°/Ï€ 360Â°ï¼360Ã—Ï€/180 ï¼2Ï€ å¼§åº¦   
        // x,yä¸ºåœ†ç‚¹åæ ‡ï¼ŒradiusåŠå¾„ï¼ŒstartAngleä¸ºå¼€å§‹çš„å¼§åº¦ï¼ŒendAngleä¸º ç»“æŸçš„å¼§åº¦ï¼Œclockwise 0ä¸ºé¡ºæ—¶é’ˆï¼Œ1ä¸ºé€†æ—¶é’ˆã€‚  
        CGContextAddArc(context, 100, 20, 15, 0, 2*PI, 0); //æ·»åŠ ä¸€ä¸ªåœ†  
        CGContextDrawPath(context, kCGPathStroke); //ç»˜åˆ¶è·¯å¾„  
          
        //å¡«å……åœ†ï¼Œæ— è¾¹æ¡†  
        CGContextAddArc(context, 150, 30, 30, 0, 2*PI, 0); //æ·»åŠ ä¸€ä¸ªåœ†  
        CGContextDrawPath(context, kCGPathFill);//ç»˜åˆ¶å¡«å……  
          
        //ç”»å¤§åœ†å¹¶å¡«å……é¢œ  
        UIColor*aColor = [UIColor colorWithRed:1 green:0.0 blue:0 alpha:1];  
        CGContextSetFillColorWithColor(context, aColor.CGColor);//å¡«å……é¢œè‰²  
        CGContextSetLineWidth(context, 3.0);//çº¿çš„å®½åº¦  
        CGContextAddArc(context, 250, 40, 40, 0, 2*PI, 0); //æ·»åŠ ä¸€ä¸ªåœ†  
        //kCGPathFillå¡«å……éé›¶ç»•æ•°è§„åˆ™,kCGPathEOFillè¡¨ç¤ºç”¨å¥‡å¶è§„åˆ™,kCGPathStrokeè·¯å¾„,kCGPathFillStrokeè·¯å¾„å¡«å……,kCGPathEOFillStrokeè¡¨ç¤ºæçº¿ï¼Œä¸æ˜¯å¡«å……  
        CGContextDrawPath(context, kCGPathFillStroke); //ç»˜åˆ¶è·¯å¾„åŠ å¡«å……  
          
        /*ç”»çº¿åŠå­¤çº¿*/  
        //ç”»çº¿  
        CGPoint aPoints[2];//åæ ‡ç‚¹  
        aPoints[0] =CGPointMake(100, 80);//åæ ‡1  
        aPoints[1] =CGPointMake(130, 80);//åæ ‡2  
        //CGContextAddLines(CGContextRef c, const CGPoint points[],size_t count)  
        //points[]åæ ‡æ•°ç»„ï¼Œå’Œcountå¤§å°  
        CGContextAddLines(context, aPoints, 2);//æ·»åŠ çº¿  
        CGContextDrawPath(context, kCGPathStroke); //æ ¹æ®åæ ‡ç»˜åˆ¶è·¯å¾„  
          
        //ç”»ç¬‘è„¸å¼§çº¿  
        //å·¦  
        CGContextSetRGBStrokeColor(context, 0, 0, 1, 1);//æ”¹å˜ç”»ç¬”é¢œè‰²  
        CGContextMoveToPoint(context, 140, 80);//å¼€å§‹åæ ‡p1  
        //CGContextAddArcToPoint(CGContextRef c, CGFloat x1, CGFloat y1,CGFloat x2, CGFloat y2, CGFloat radius)  
        //x1,y1è·Ÿp1å½¢æˆä¸€æ¡çº¿çš„åæ ‡p2ï¼Œx2,y2ç»“æŸåæ ‡è·Ÿp3å½¢æˆä¸€æ¡çº¿çš„p3,radiusåŠå¾„,æ³¨æ„, éœ€è¦ç®—å¥½åŠå¾„çš„é•¿åº¦,  
        CGContextAddArcToPoint(context, 148, 68, 156, 80, 10);  
        CGContextStrokePath(context);//ç»˜ç”»è·¯å¾„  
          
        //å³  
        CGContextMoveToPoint(context, 160, 80);//å¼€å§‹åæ ‡p1  
        //CGContextAddArcToPoint(CGContextRef c, CGFloat x1, CGFloat y1,CGFloat x2, CGFloat y2, CGFloat radius)  
        //x1,y1è·Ÿp1å½¢æˆä¸€æ¡çº¿çš„åæ ‡p2ï¼Œx2,y2ç»“æŸåæ ‡è·Ÿp3å½¢æˆä¸€æ¡çº¿çš„p3,radiusåŠå¾„,æ³¨æ„, éœ€è¦ç®—å¥½åŠå¾„çš„é•¿åº¦,  
        CGContextAddArcToPoint(context, 168, 68, 176, 80, 10);  
        CGContextStrokePath(context);//ç»˜ç”»è·¯å¾„  
          
        //å³  
        CGContextMoveToPoint(context, 150, 90);//å¼€å§‹åæ ‡p1  
        //CGContextAddArcToPoint(CGContextRef c, CGFloat x1, CGFloat y1,CGFloat x2, CGFloat y2, CGFloat radius)  
        //x1,y1è·Ÿp1å½¢æˆä¸€æ¡çº¿çš„åæ ‡p2ï¼Œx2,y2ç»“æŸåæ ‡è·Ÿp3å½¢æˆä¸€æ¡çº¿çš„p3,radiusåŠå¾„,æ³¨æ„, éœ€è¦ç®—å¥½åŠå¾„çš„é•¿åº¦,  
        CGContextAddArcToPoint(context, 158, 102, 166, 90, 10);  
        CGContextStrokePath(context);//ç»˜ç”»è·¯å¾„  
        //æ³¨ï¼Œå¦‚æœè¿˜æ˜¯æ²¡å¼„æ˜ç™½æ€ä¹ˆå›äº‹ï¼Œè¯·å‚è€ƒï¼šhttp://donbe.blog.163.com/blog/static/138048021201052093633776/  
          
        /*ç”»çŸ©å½¢*/  
        CGContextStrokeRect(context,CGRectMake(100, 120, 10, 10));//ç”»æ–¹æ¡†  
        CGContextFillRect(context,CGRectMake(120, 120, 10, 10));//å¡«å……æ¡†  
        //çŸ©å½¢ï¼Œå¹¶å¡«å¼ƒé¢œè‰²  
        CGContextSetLineWidth(context, 2.0);//çº¿çš„å®½åº¦  
        aColor = [UIColor blueColor];//blueè“è‰²  
        CGContextSetFillColorWithColor(context, aColor.CGColor);//å¡«å……é¢œè‰²  
        aColor = [UIColor yellowColor];  
        CGContextSetStrokeColorWithColor(context, aColor.CGColor);//çº¿æ¡†é¢œè‰²  
        CGContextAddRect(context,CGRectMake(140, 120, 60, 30));//ç”»æ–¹æ¡†  
        CGContextDrawPath(context, kCGPathFillStroke);//ç»˜ç”»è·¯å¾„  
          
        //çŸ©å½¢ï¼Œå¹¶å¡«å¼ƒæ¸å˜é¢œè‰²  
        //å…³äºé¢œè‰²å‚è€ƒhttp://blog.sina.com.cn/s/blog_6ec3c9ce01015v3c.html  
        //http://blog.csdn.net/reylen/article/details/8622932  
        //ç¬¬ä¸€ç§å¡«å……æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼å¿…é¡»å¯¼å…¥ç±»åº“quartcoreå¹¶#import <QuartzCore/QuartzCore.h>ï¼Œè¿™ä¸ªå°±ä¸å±äºåœ¨contextä¸Šç”»ï¼Œè€Œæ˜¯å°†å±‚æ’å…¥åˆ°viewå±‚ä¸Šé¢ã€‚é‚£ä¹ˆè¿™é‡Œå°±è®¾è®¡åˆ°Quartz Core å›¾å±‚ç¼–ç¨‹äº†ã€‚  
        CAGradientLayer *gradient1 = [CAGradientLayer layer];  
        gradient1.frame = CGRectMake(240, 120, 60, 30);  
        gradient1.colors = [NSArray arrayWithObjects:(id)[UIColor whiteColor].CGColor,  
                            (id)[UIColor grayColor].CGColor,  
                            (id)[UIColor blackColor].CGColor,  
                            (id)[UIColor yellowColor].CGColor,  
                            (id)[UIColor blueColor].CGColor,  
                            (id)[UIColor redColor].CGColor,  
                            (id)[UIColor greenColor].CGColor,  
                            (id)[UIColor orangeColor].CGColor,  
                            (id)[UIColor brownColor].CGColor,nil];  
        [self.layer insertSublayer:gradient1 atIndex:0];  
        //ç¬¬äºŒç§å¡«å……æ–¹å¼   
        CGColorSpaceRef rgb = CGColorSpaceCreateDeviceRGB();  
        CGFloat colors[] =  
        {  
            1,1,1, 1.00,  
            1,1,0, 1.00,  
            1,0,0, 1.00,  
            1,0,1, 1.00,  
            0,1,1, 1.00,  
            0,1,0, 1.00,  
            0,0,1, 1.00,  
            0,0,0, 1.00,  
        };  
        CGGradientRef gradient = CGGradientCreateWithColorComponents  
        (rgb, colors, NULL, sizeof(colors)/(sizeof(colors[0])*4));//å½¢æˆæ¢¯å½¢ï¼Œæ¸å˜çš„æ•ˆæœ   
        CGColorSpaceRelease(rgb);  
        //ç”»çº¿å½¢æˆä¸€ä¸ªçŸ©å½¢  
        //CGContextSaveGStateä¸CGContextRestoreGStateçš„ä½œç”¨  
        /* 
         CGContextSaveGStateå‡½æ•°çš„ä½œç”¨æ˜¯å°†å½“å‰å›¾å½¢çŠ¶æ€æ¨å…¥å †æ ˆã€‚ä¹‹åï¼Œæ‚¨å¯¹å›¾å½¢çŠ¶æ€æ‰€åšçš„ä¿®æ”¹ä¼šå½±å“éšåçš„æç”»æ“ä½œï¼Œä½†ä¸å½±å“å­˜å‚¨åœ¨å †æ ˆä¸­çš„æ‹·è´ã€‚åœ¨ä¿®æ”¹å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡CGContextRestoreGStateå‡½æ•°æŠŠå †æ ˆé¡¶éƒ¨çš„çŠ¶æ€å¼¹å‡ºï¼Œè¿”å›åˆ°ä¹‹å‰çš„å›¾å½¢çŠ¶æ€ã€‚è¿™ç§æ¨å…¥å’Œå¼¹å‡ºçš„æ–¹å¼æ˜¯å›åˆ°ä¹‹å‰å›¾å½¢çŠ¶æ€çš„å¿«é€Ÿæ–¹æ³•ï¼Œé¿å…é€ä¸ªæ’¤æ¶ˆæ‰€æœ‰çš„çŠ¶æ€ä¿®æ”¹ï¼›è¿™ä¹Ÿæ˜¯å°†æŸäº›çŠ¶æ€ï¼ˆæ¯”å¦‚è£å‰ªè·¯å¾„ï¼‰æ¢å¤åˆ°åŸæœ‰è®¾ç½®çš„å”¯ä¸€æ–¹å¼ã€‚ 
         */  
        CGContextSaveGState(context);  
        CGContextMoveToPoint(context, 220, 90);  
        CGContextAddLineToPoint(context, 240, 90);  
        CGContextAddLineToPoint(context, 240, 110);  
        CGContextAddLineToPoint(context, 220, 110);  
        CGContextClip(context);//contextè£å‰ªè·¯å¾„,åç»­æ“ä½œçš„è·¯å¾„  
        //CGContextDrawLinearGradient(CGContextRef context,CGGradientRef gradient, CGPoint startPoint, CGPoint endPoint,CGGradientDrawingOptions options)  
        //gradientæ¸å˜é¢œè‰²,startPointå¼€å§‹æ¸å˜çš„èµ·å§‹ä½ç½®,endPointç»“æŸåæ ‡,optionså¼€å§‹åæ ‡ä¹‹å‰orå¼€å§‹ä¹‹åå¼€å§‹æ¸å˜  
        CGContextDrawLinearGradient(context, gradient,CGPointMake  
                                    (220,90) ,CGPointMake(240,110),  
                                    kCGGradientDrawsAfterEndLocation);  
        CGContextRestoreGState(context);// æ¢å¤åˆ°ä¹‹å‰çš„context  
          
        //å†å†™ä¸€ä¸ªçœ‹çœ‹æ•ˆæœ  
        CGContextSaveGState(context);  
        CGContextMoveToPoint(context, 260, 90);  
        CGContextAddLineToPoint(context, 280, 90);  
        CGContextAddLineToPoint(context, 280, 100);  
        CGContextAddLineToPoint(context, 260, 100);  
        CGContextClip(context);//è£å‰ªè·¯å¾„  
        //è¯´ç™½äº†ï¼Œå¼€å§‹åæ ‡å’Œç»“æŸåæ ‡æ˜¯æ§åˆ¶æ¸å˜çš„æ–¹å‘å’Œå½¢çŠ¶  
        CGContextDrawLinearGradient(context, gradient,CGPointMake  
                                    (260, 90) ,CGPointMake(260, 100),  
                                    kCGGradientDrawsAfterEndLocation);  
        CGContextRestoreGState(context);// æ¢å¤åˆ°ä¹‹å‰çš„context  
          
        //ä¸‹é¢å†çœ‹ä¸€ä¸ªé¢œè‰²æ¸å˜çš„åœ†  
        CGContextDrawRadialGradient(context, gradient, CGPointMake(300, 100), 0.0, CGPointMake(300, 100), 10, kCGGradientDrawsBeforeStartLocation);  
          
        /*ç”»æ‰‡å½¢å’Œæ¤­åœ†*/  
        //ç”»æ‰‡å½¢ï¼Œä¹Ÿå°±ç”»åœ†ï¼Œåªä¸è¿‡æ˜¯è®¾ç½®è§’åº¦çš„å¤§å°ï¼Œå½¢æˆä¸€ä¸ªæ‰‡å½¢  
        aColor = [UIColor colorWithRed:0 green:1 blue:1 alpha:1];  
        CGContextSetFillColorWithColor(context, aColor.CGColor);//å¡«å……é¢œè‰²  
        //ä»¥10ä¸ºåŠå¾„å›´ç»•åœ†å¿ƒç”»æŒ‡å®šè§’åº¦æ‰‡å½¢  
        CGContextMoveToPoint(context, 160, 180);  
        CGContextAddArc(context, 160, 180, 30,  -60 * PI / 180, -120 * PI / 180, 1);  
        CGContextClosePath(context);  
        CGContextDrawPath(context, kCGPathFillStroke); //ç»˜åˆ¶è·¯å¾„  
      
        //ç”»æ¤­åœ†  
        CGContextAddEllipseInRect(context, CGRectMake(160, 180, 20, 8)); //æ¤­åœ†  
        CGContextDrawPath(context, kCGPathFillStroke);  
          
        /*ç”»ä¸‰è§’å½¢*/  
        //åªè¦ä¸‰ä¸ªç‚¹å°±è¡Œè·Ÿç”»ä¸€æ¡çº¿æ–¹å¼ä¸€æ ·ï¼ŒæŠŠä¸‰ç‚¹è¿æ¥èµ·æ¥  
        CGPoint sPoints[3];//åæ ‡ç‚¹  
        sPoints[0] =CGPointMake(100, 220);//åæ ‡1  
        sPoints[1] =CGPointMake(130, 220);//åæ ‡2  
        sPoints[2] =CGPointMake(130, 160);//åæ ‡3  
        CGContextAddLines(context, sPoints, 3);//æ·»åŠ çº¿  
        CGContextClosePath(context);//å°èµ·æ¥  
        CGContextDrawPath(context, kCGPathFillStroke); //æ ¹æ®åæ ‡ç»˜åˆ¶è·¯å¾„  
          
        /*ç”»åœ†è§’çŸ©å½¢*/  
        float fw = 180;  
        float fh = 280;  
          
        CGContextMoveToPoint(context, fw, fh-20);  // å¼€å§‹åæ ‡å³è¾¹å¼€å§‹  
        CGContextAddArcToPoint(context, fw, fh, fw-20, fh, 10);  // å³ä¸‹è§’è§’åº¦  
        CGContextAddArcToPoint(context, 120, fh, 120, fh-20, 10); // å·¦ä¸‹è§’è§’åº¦  
        CGContextAddArcToPoint(context, 120, 250, fw-20, 250, 10); // å·¦ä¸Šè§’  
        CGContextAddArcToPoint(context, fw, 250, fw, fh-20, 10); // å³ä¸Šè§’  
        CGContextClosePath(context);  
        CGContextDrawPath(context, kCGPathFillStroke); //æ ¹æ®åæ ‡ç»˜åˆ¶è·¯å¾„  
          
        /*ç”»è´å¡å°”æ›²çº¿*/  
        //äºŒæ¬¡æ›²çº¿  
        CGContextMoveToPoint(context, 120, 300);//è®¾ç½®Pathçš„èµ·ç‚¹  
        CGContextAddQuadCurveToPoint(context,190, 310, 120, 390);//è®¾ç½®è´å¡å°”æ›²çº¿çš„æ§åˆ¶ç‚¹åæ ‡å’Œç»ˆç‚¹åæ ‡  
        CGContextStrokePath(context);  
        //ä¸‰æ¬¡æ›²çº¿å‡½æ•°  
        CGContextMoveToPoint(context, 200, 300);//è®¾ç½®Pathçš„èµ·ç‚¹  
        CGContextAddCurveToPoint(context,250, 280, 250, 400, 280, 300);//è®¾ç½®è´å¡å°”æ›²çº¿çš„æ§åˆ¶ç‚¹åæ ‡å’Œæ§åˆ¶ç‚¹åæ ‡ç»ˆç‚¹åæ ‡  
        CGContextStrokePath(context);  
          
          
        /*å›¾ç‰‡*/  
        UIImage *image = [UIImage imageNamed:@"apple.jpg"];  
        [image drawInRect:CGRectMake(60, 340, 20, 20)];//åœ¨åæ ‡ä¸­ç”»å‡ºå›¾ç‰‡  
    //    [image drawAtPoint:CGPointMake(100, 340)];//ä¿æŒå›¾ç‰‡å¤§å°åœ¨pointç‚¹å¼€å§‹ç”»å›¾ç‰‡ï¼Œå¯ä»¥æŠŠæ³¨é‡Šå»æ‰çœ‹çœ‹  
        CGContextDrawImage(context, CGRectMake(100, 340, 20, 20), image.CGImage);//ä½¿ç”¨è¿™ä¸ªä½¿å›¾ç‰‡ä¸Šä¸‹é¢ å€’äº†ï¼Œå‚è€ƒhttp://blog.csdn.net/koupoo/article/details/8670024  
          
    //    CGContextDrawTiledImage(context, CGRectMake(0, 0, 20, 20), image.CGImage);//å¹³é“ºå›¾  
      
    }  
      
      
    @end  
==============================================================================

ç”¨æ³•ï¼š 
==============================================================================
    CustomView *customView = [[CustomView alloc]initWithFrame:CGRectMake(0, 0, 320, self.view.frame.size.height)];  
        [self.view addSubview:customView];  
==============================================================================